




창업연계공학설계입문
AD 프로젝트




과제명	AD프로젝트_xyCat
소속	국민대학교 소프트웨어학부
학번	20191671, 20191674, 20191686, 20193398
성명	조영서, 조현준, 최혜원, 홍석주
문서 제목	창업연계공학설계입문 AD프로젝트
교수	한광수 교수님















목 차

1	개발 내용 및 결과물	3
1.1	목표	3
1.2	연구/개발 내용 및 결과물	3
1.2.1	연구/개발 내용	3
1.2.2	현실적 제한 요소 및 그 해결 방안	4
1.2.3	결과물 화면	4
1.3	기대효과 및 활용방안	5
2	자기평가	5





개발 내용 및 결과물
목표
 우리 팀이 구현하고자 하던 목표는 제목에서도 볼 수 있듯이 xyCat이다. Xycat은 실습용으로 사용 중인 xyCar와 고양이를 뜻하는 Cat을 합성해 만든 단어이다. 우리가 생각하는 고양이는 길고양이에 가까운데 길고양이는 평소에 돌아다닐 때 사람이 어디에 있는지 경계를 하다가 사람이 다가가면 재빨리 도망을 간다. 우리는 xyCar를 길고양이와 비슷하게 사람이 가까이 가면 도망가게 만들어 보고 싶었다. 그리고 다가오게 하는 트리거로 참치 캔을 사용해서 참치 캔을 xyCar의 카메라에 보여주면 스스로 인식하고 나를 따라오게끔 만들고 싶었다. 사실 길고양이는 참치 캔을 보여준다고 해서 따라오지는 않지만 그저 재미있는 요소로 봐주었으면 한다.


연구/개발 내용 및 결과물
연구/개발 내용
  먼저 xyCat이 사람이 다가오는 것을 인지하기 위해 xyCar의 초음파 센서를 사용하기로 했다. xyCar에는 총 8개의 초음파 센서가 달려있는데 xyCar는 이 8개의 센서를 모두 이용한다. 먼저 경계하는 모습을 만들어 내기 위해 모든 센서의 값이 일정 이상이 되었을 때는 가장 가까운 쪽의 방향으로 주행은 하지 않고 차 바퀴의 방향만 돌리기로 하였다. 이렇게 되면, 마치 사람이 다가갔을 때 xyCar는 그 곳을 바라보고 경계하는 듯한 모습이 보이기 때문이다. 그리고 도망가는 것은 사람이 다가가 센서 중 값이 하나라도 일정 미만으로 내려갔을 때 그 최솟값을 보낸 센서의 반대 방향으로 도망가게 하려고 만들었다. 초음파 센서가 /ultrasonic 토픽에 실측값을 발행했을 때 배열에 담겨서 날아오는데 이 때에 인덱스에 따라 각각 가리키는 방향의 각도를 부여한 뒤 최소값에 해당하는 센서의 인덱스의 각에 180도를 더한 후 360도로 나머지를 계산해 반대 각을 알아낸 후 이 값이 전진이면 속도를 120으로 설정해 도망가도록 만들어 놓았고 후진이면 속도를 60으로 설정해 후진을 할 수 있게 설정해 놓았다. 그리고 우리가 재미로 넣어 놓은 참치캔 인식 알고리즘의 방식은 Google의 AI부서에서 만든 teachable machine을 사용해서 하려고 했다. 이때, teachable machine이란 tensorflow를 사용해서 사용자가 카메라나 마이크로 넣어 놓은 샘플을 스스로 인식해서 지금 들어온 사진이나 음성이 어느 샘플에 가까운지 퍼센트로 알려줄 수 있는 웹 기반 툴이다. 우리는 참치만을 인식한 샘플과 배경을 인식한 샘플을 넣어 xyCar에서 openCV로 받아온 카메라 센서의 정보를 frame 단위로 teachable machine에서 받은 모듈을 사용해 현재 상태가 어느 쪽에 가까운지를 받아와 만약 참치가 카메라에 인식된다고 판단되면, 차가 사용자에게 다가오게 하려고 하였다. 그리고 차를 정지시키게 하는 조건으로는 모든 초음파 센서의 값이 일정 값 이하가 되면 멈추게 하였다.

현실적 제한 요소 및 그 해결 방안
 처음 설계 단계에서는 xyCar에 장착된 각각의 초음파 센서의 값에서 가까운 순으로 가중치를 두어 진행 방향을 결정하려고 하였지만, 초음파 센서가 오작동을 하여 0을 반환하거나 최댓값이 255를 반환하는 빈도수가 너무 많아서 가중치를 하는 방법이 오히려 오류가 나는 경우를 초래하는 것임을 깨달았다. 그리고 가중치의 값이 거리이며 (각도)X(가중치)를 가중치의 합으로 나누기 때문에 가중치의 합이 너무 커져서 거리가 달라져 가중치의 값이 크게 변해도 결과적으로 나오는 가중치의 평균 값이 140~150 정도로 머무르게 된다. 따라서 어느 쪽으로 도망가야 하는지 적절한 각도를 주지 못하기 때문에 가중치 방법을 사용하지 못하고 다른 방법을 찾았다.
 또한, 경계 상태를 추가하기 전에 xyCar는 앞, 뒤 둘 다 장애물이 있을 때 뒤로 가서 장애물을 인식한 후 앞으로 가 장애물을 인식하고 뒤로 가는 행동을 반복해 오직 앞, 뒤로만 움직이는 이상한 고양이가 되었다. 경계 상태를 추가함으로써 장애물을 인식하고 앞으로 나와서 가만히 있을 수 있게 되었다.
 Teachable machine에 참치 캔 샘플을 적용할 때 배경 가운데에 참치 캔을 인식하게 되면 배경만 인식해도 참치 캔 샘플에 가까운 퍼센트를 내놓는 일이 많았다. 이 문제는 화면에 배경을 최대한 제외시키고 정확히 참치 캔을 가득 채워 샘플을 만드니 해결되었다.
 Teachable machine을 사용하기 위해서는 xyCar내의 python에 tensorflow모듈을 설치해야 하는데 xyCar를 인터넷에 연결하고 pip를 통해 모듈을 다운 받으려고 했으나 xyCar의 시스템으로는 설치가 되지 않는다고 해서 결국 참치 캔 인식 알고리즘을 적용하는데 실패했다. 

결과
경계 상태: 8개의 모든 초음파 센서에서 일정 값 이상의 거리를 받음


xyCar 가까이에 장애물(사람)이 있을 때: 장애물 (사람)이 있는 반대 방향으로 이동

Teachable machine을 이용해 참치 캔 인식



기대효과 및 활용방안
가까이에 있는 장애물이나 다가오는 사람을 피해 도망가는 xyCat(고양이)을 잡기 위해서 움직이다 보면 재미는 물론이고 운동의 효과까지 얻을 수 있을 것이다. 
xyCat은 장애물을 인식해 반대 방향으로 이동하는 것이기 때문에 이를 활용한다면 로봇 청소기 등에 활용될 수 있을 것으로 기대된다.
                                                                                                                                                                                                 
자기평가
 초음파 센서를 통해 장애물을 인식해 반대로 이동하는 것은 구현에 성공하였다. 그러나, teachable machine으로 참치 캔을 인식해서 따라오게 만드는 것에는 실패하였다. 아쉽기는 하지만, 실패한 것에는 xyCar시스템의 문제가 컸기 때문에 어쩔 수 없다고 생각한다.

20191671 조영서
연의 삼국지에서 나관중이 제시한 '성공한 인물상'은 바로 자리에 맞게 잘 변화하는 인간이다. 이번 프로젝트를 진행하면서 때로는 뒤에서 작업하는 사람으로, 때로는 프로젝트를 리드하는 사람으로, 여러 역할을 수행하면서 각자의 경우에 어떤 식으로 일을 처리하여야 하는지에 대한 깨달음을 얻을 수 있었다. 특히나 팀 단위의 프로젝트를 진행하는 상황에서 어떻게 사람을 관리하고 일을 분배하여야 하는가에 대한 실마리를 잡을랑 말랑 하다.

20191674 조현준
<창업연계공학설계입문> AD프로젝트를 진행하며 많은 것을 느꼈다. 잘 될 때도 있었지만 잘 되지 않을 때도 많았기 때문에 디버깅을 하며 코드를 어떻게 해야 더 깔끔하고 효율적인지 알게 되었고, 점차 하면 할수록 더 나아지는 것이 눈에 보였기 때문에 흥미를 잃지 않고 프로젝트를 수행할 수 있었다. 또한 여러 명이 코드를 작성하면서 변수명이나 코드의 구조가 달라져 오류가 발생하는 것을 보면서 이러한 여러 명이 진행하는 프로젝트에서는 프로그래밍도 중요하지만 같은 구조와 변수명을 사용하도록 하는 회의가 중요하다고 생각하게 되었고, 수많은 시행착오를 겪다 보니 버전관리의 중요성을 뼈저리게 알 수 있었다. 또한 소프트웨어를 만들어서 실행할 때는 몰랐던 하드웨어의 특성(배터리양에 따른 모터의 파워, 센서의 작동, 카메라 이미지의 인식, 그 외 물리적으로 작용하는 것들)에 대하여 소프트웨어가 어떻게 대응해야 하는지를 알게 되었다.
 
20191686 최혜원
<창업연계공학설계입문> 시간에 배운 내용들을 토대로 코드를 작성하면서 많은 것들을 배웠다. 모르는 부분이나 이해되지 않는 부분은 조원들에게 물어보고 같이 해결하면서 발전해 나갔다. 아쉬운 점은 xyCar 한 대로 여럿이서(조원 모두가) 코드를 작성하고 수정하기에는 어려움이 많았다. 처음에는 코드 작성을 시작하지도 못했는데 어느 정도 작성할 수 있게 된 점이 내가 가장 많이 변화한 모습인 것 같다. 그리고 또 다른 아쉬운 점은 형상 관리 부분이다. 우리가 생각하기에 좋은 코드를 작성했는데 형상관리를 제대로 하지 못해서 여러 좋은 코드가 있었음에도 그 위에 계속 코드를 작성했기 때문에 그 좋은 코드들을 제대로 활용하지 못한 것 같아 아쉽다. 그리고 코드로는 오류가 없다고 생각했는데 실제로는 작동하지 않는 경우도 있어서 금방 끝날 줄 알았던 일들도 생각보다 오래 걸리는 경우도 있었다. 

20193398 홍석주
사실 그동안 4명 이상의 팀원들과 한 프로젝트를 진행해 본 적이 없어서 이전까진 어떻게 해야 모든 팀원이 같이 공평하게 해낼 수 있는지 몰랐다. 하지만 AD 프로젝트를 진행하면서 처음으로 소통을 통해 각자의 역할을 분담하고 다같이 수행하며 어려운 부분이 나왔을 때 다같이 머리를 맞대고 해결해 나가면서 팀 프로젝트에 대한 수행 능력을 키울 수 있었다. 흥미로운 주제를 수행하면서 솔직히 그동안 코드 짠 것에 비해 결과는 현실적으로 와 닿지 않았기 때문에 성취감을 느끼기 어려웠는데 실제로 돌아가는 xycar를 보면서 흥미를 증진시킬 수 있었다. 개인적으로는 노드들을 객체지향적 프로그래밍과 수학적인 논리들을 사용하면서 제작했기 때문에 스스로의 능력을 늘리는데도 큰 도움이 되었다. 아쉬운 점은 내가 만든 코드들이 항상 맞고 완벽한 건 아닌데 자신감이 너무 센 편인지 의견 수용을 적절히 못한 것 같기도 하다. 다음 프로젝트때는 결점들을 보안해서 더욱 팀워크 높게 수행해 보고 싶다.

	국민대학교
소프트웨어융합대학
소프트웨어학부
창업연계공학설계입문	Page 1 of 7	결과보고서 
	국민대학교
소프트웨어학부
창업연계공학설계입문	창업연계공학설계입문 AD프로젝트
과제명	AD프로젝트_xyCat
학번/이름	20191671조영서, 20191674조현준,
20191686최혜원, 20193398홍석주
창업연계공학설계입문	Page 3 of 7	결과보고서
과제명	AD프로젝트_xyCat
소속	국민대학교 소프트웨어학부
학번	20191671, 20191674, 20191686, 20193398
성명	조영서, 조현준, 최혜원, 홍석주
문서 제목	창업연계공학설계입문 AD프로젝트
교수	한광수 교수님
